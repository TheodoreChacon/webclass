<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Where's Wally?</title>
  <link rel="icon" type="image/x-icon" href="images/favicon.png">

  <style>
    /* ====== YOUR EXISTING STYLES (trimmed only where irrelevant) ====== */

    html, body { 
      margin: 0; 
      padding: 0; 
      height: 100%;
    } 

    body {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      font-family: Helvetica, arial, sans-serif; 
      color: #000000; 
      background: #faf7f2; 
      line-height: 1.2; 
    }

    .hero {
      max-height: 75vh; 
      width: auto;
      height: auto;
      object-fit: contain;
      display: block;
    }

    .header { 
      text-align: center; 
      padding: 10px; 
    } 

    .footer {
      padding: 10px; 
    }

    .header h1 { 
      font-size: 70px; 
      margin: 0; 
    } 

    .card { 
      background: #ffffff; 
      border-radius: 12px; 
      box-shadow: 0 6px 22px rgba(0,0,0,0.08); 
      max-width: 280px; 
    } 

    .card.scene{
      max-width: 1500px;  
      margin: 0;             
      padding: 0;                    
      background: transparent;
      box-shadow: none;
      border-radius: 8px;
    }

    .scene { 
      position: relative; 
    } 

    .hit { 
      position: absolute; 
      display: block; 
      background: transparent; 
      cursor: pointer; 
    } 

    /* LEVEL 1 clickable areas */ 
    .hit.correct1 { 
      left: 50.5%;  
      top: 46%; 
      width: 5%; 
      height: 8%; 
      z-index: 2; 
    } 

    .hit.wrong1 { 
      inset: 0; 
      z-index: 1; 
    } 

    .helper-wally{
      position: fixed;
      left: 14px;
      bottom: -4px;
      width: 200px;          
      height: auto;
      pointer-events: none; 
      z-index: 1;           
      filter: drop-shadow(0 3px 10px rgba(0,0,0,.25));
      opacity: .98;
    }

    @media (max-width: 640px){
      .helper-wally{ width: 72px; left: 10px; bottom: 10px; }
    }

    .hint-gif.simple{
      position: fixed;
      right: 15px;
      bottom: 0px;
      width: 20vw;             
      max-width: 380px;
      min-width: 220px;
      pointer-events: none;    
      opacity: 0;
      transform: translate(20%, 20%) scale(.98);
      transition: opacity .35s ease, transform .35s ease;
      z-index: 5;
    }
    .hint-gif.simple img{
      display: block;
      width: 100%;
      height: auto;
      background: transparent; 
      box-shadow: none;
      border-radius: 0;
    }
    .hint-gif.simple.show{
      opacity: 1;
      transform: translate(0, 0) scale(1);
    }

    @media (max-width: 640px){
      .hint-gif.simple{ 
        width: 55vw; 
        max-width: 300px; 
      }
    }

    /* ====== MAGNIFIER CSS (IMPORTANT) ====== */

    .img-magnifier-container {
      position: relative; /* anchor for the glass */
    }

    .img-magnifier-glass {
      position: absolute;
      border: 3px solid #000;
      border-radius: 50%;
      width: 120px;
      height: 120px;
      pointer-events: none;        /* lets clicks pass through to .hit links */
      box-shadow: 0 0 10px rgba(0, 0, 0, .35);
      z-index: 3;                  /* above image & hit areas */
      /* Uncomment this to debug visibility:
      background-color: rgba(255,0,0,0.2);
      */
    }

    .note {
      max-width: 700px;
      margin: 10px auto;
      padding: 10px 14px;
      background: #fff6d3;
      border: 1px solid #f0d682;
      border-radius: 8px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header class="header">
    <h1>Santa Monica Beach</h1>
  </header>

  <div class="note">
    <strong>Hint:</strong> The beach is packed! Start at the waterline and sweep left to right.
    Wally is standing upright and wearing glasses.
  </div>

  <!-- Key changes: added img-magnifier-container + id="level1-image" -->
  <figure class="card scene img-magnifier-container">
    <img
      src="images/level1.jpg"
      alt="Busy beach scene from Where's Wally"
      class="hero"
      id="level1-image"
    >
    <a href="level2.html" class="hit correct1" aria-label="Wally found (correct)"></a>
    <a href="tryagain.html" class="hit wrong1" aria-label="Wrong spot, try again"></a>
  </figure>

  <footer class="footer">
    <small>Â© 2025 Theodore Chacon</small>
  </footer>

  <img src="images/jumping.gif" alt="Wally reference" class="helper-wally">

  <div class="hint-gif simple" aria-hidden="true">
    <img src="images/misterwaldo.gif" alt="">
  </div>

  <script>
    // ====== Your hint-gif logic (unchanged) ======
    (function () {
      const el = document.querySelector('.hint-gif.simple');
      if (!el) return;

      const delayMs   = 45000; 
      const visibleMs = 5000;  

      setTimeout(() => {
        el.classList.add('show');
        setTimeout(() => el.classList.remove('show'), visibleMs);
      }, delayMs);
    })();


    // ====== Magnifier function (adapted from W3Schools) ======
    function magnify(imgID, zoom) {
      var img = document.getElementById(imgID);
      if (!img) {
        console.warn("magnify: no image with id", imgID);
        return;
      }

      var glass = document.createElement("div");
      glass.className = "img-magnifier-glass";

      var container = img.parentElement;
      container.insertBefore(glass, img);

      // Use rendered size so it matches what you see on screen
      var imgWidth  = img.clientWidth;
      var imgHeight = img.clientHeight;

      glass.style.backgroundImage  = "url('" + img.src + "')";
      glass.style.backgroundRepeat = "no-repeat";
      glass.style.backgroundSize   =
        (imgWidth * zoom) + "px " + (imgHeight * zoom) + "px";

      var bw = 3;
      var w  = glass.offsetWidth / 2;
      var h  = glass.offsetHeight / 2;

      // Listen on container (figure) so hits overlays don't stop it
      container.addEventListener("mousemove", moveMagnifier);
      container.addEventListener("touchmove", moveMagnifier, { passive: false });

      function moveMagnifier(e) {
        if (e.type === "touchmove") e.preventDefault();

        var pos = getCursorPos(e);
        var x   = pos.x;
        var y   = pos.y;

        if (x > imgWidth - (w / zoom)) x = imgWidth - (w / zoom);
        if (x < w / zoom)              x = w / zoom;
        if (y > imgHeight - (h / zoom)) y = imgHeight - (h / zoom);
        if (y < h / zoom)              y = h / zoom;

        glass.style.left = (x - w) + "px";
        glass.style.top  = (y - h) + "px";

        glass.style.backgroundPosition =
          "-" + ((x * zoom) - w + bw) + "px " +
          "-" + ((y * zoom) - h + bw) + "px";
      }

      function getCursorPos(e) {
        var rect = img.getBoundingClientRect();
        var x, y;

        if (e.touches && e.touches.length) {
          x = e.touches[0].clientX - rect.left;
          y = e.touches[0].clientY - rect.top;
        } else {
          x = e.clientX - rect.left;
          y = e.clientY - rect.top;
        }

        return { x: x, y: y };
      }
    }

    // Initialize once everything (including the image) is loaded
    window.addEventListener("load", function () {
      magnify("level1-image", 2.5); // tweak zoom level here
    });
  </script>
</body>
</html>
